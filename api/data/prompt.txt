 Given the following Django Models:

 {} 

Generate SQL query for a sqlite database to answer the question: {} 


#########Â RULES TO FOLLOW ###########

Do  not SELECT "area_code" before defining it, as it is not a column in any table. Area code needs to be calculated. Use "regex_find('^\w+\d+', postcode) as area_code" to calculate the area_code from postcode, instead of using "SUBSTR(api_property.postcode, 1, INSTR(api_property.postcode, ' ')-1)". Do not use "SUBSTR(api_property.postcode, 1, INSTR(api_property.postcode, ' ')-1)"

Only return area_codes that begin with SW|SE|W|NW|N|E|WC|EC. Use REGEXP '(^SW|^SE|^W|^NW|^N|^E|^WC|^EC)\d' to do this.

Safe is when crimes are minimal. 

Area means "area code", which is everything before the space in the postcode.

When using table aliases, please add the alias name to the column names where appropriate, for example in SELECT and GROUP BY statements, for the area_code column.

Whenever doing "SELECT area_code" always specify the table name, for example "SELECT crime.area_code". NEVER JUST WRITE "SELECT area_code" without specifying the table you want to use. At the top-most level of the SQL query, always use table alias for area_code, for example "SELECT table_name.area_code"

Do not explain the code or add comments. Do not return anything apart from actual sql query. Only respond is sql language.

Always return 5 areas codes.

Table names have a prefix of "api_" followed by lower case model name

The api_area table does not have a postcode, only an area code, defined as "code", so do not calculate area_code from postcode in api_area table and instead "SELECT code"
FROM api_area

in the api_crimeincdent table, these are the ONLY available categories:
Violence and sexual offences
Anti-social behaviour
Criminal damage and arson
Drugs
Theft from the person
Vehicle crime
Other crime
Other theft
Burglary
Possession of weapons
Public order
Shoplifting
Robbery
Bicycle theft

Interpret/filter only using these categories.

When asked for crime instances without specifying "most" or "least" display them in descending order.
Ignore the api_crimeincdent table if crime (or any reference to crime) is not mentioned in the user prompt.
`
Transport links refers to stations.

if a query asks about transport_links, GROUP BY station_count 

The station name is the "name" column in the api_station table.
The station postcode can be found through the api_stationunit table. The station_code in the api_stations table can be mapped onto unit_code in the api_stationunit table. It is not an exact match but contains the same character sequence inside both codes.

 There are multiple station units ("unit_code"s) in the api_stationunit table for each "station_code" in the api_station table. The area code for the station is the area code for all its station units (unit_codes).

use this: "ON api_station.station_code=SUBSTR(api_stationunit.unit_code, 1, LENGTH(api_station.station_code))" to match station_units to stations in the two tables.

Any unit_code that has the string "Bus" within it, is a bus stop. Use this information when queried about bus stops.

"transport_links" is not a column in api_station or api_stationunit, therefore, you CANNOT "GROUP BY" or "ORDER BY" that column. 

in api_property, house_type categories are:
House 
Flat / Apartment
Studio
New development
Penthouse

In api_groceryshop, if asked about any specific shop, check either the "retailer" and "type" columns and use %LIKE% instead of equals. Compare the shop name to an all lowercase "retailer" and "type" columns also.

"marks and spencer" is the same as "marks and spencers"

when asked about car parks, look into api_vehiclechargingpoint table, and search for the string "Car Park" in the site_name column.

When asked for an area with the most "green area" or "green space" or "blue area" or "most surrounded by water" (or equivalent), look in api_greenbluearea. Add all the green (or blue) area for each area code. an area_code can have multiple ward_names, but each ward_name has one area_code.
There is no postcode colum in the api_greenbluearea table. In this table only, you do not need to calculate area_code as it is already provided.

The column "city" in api_property is always "London". Do not use this as a filter ever.

"City of London" or "Central London" only is areas where postcode starts with "EC". You cannot find properties in City of London by looking at the api_property.city column. To find areas in "central london" use the EC poostcode.

West London is is areas where postcode starts with "W" or "WC"

East London is is areas where postcode starts with "E"

North London is is areas where postcode starts with "N" or "NW"

South London is is areas where postcode starts with "SE" or "SW"